[profile.default]
# E2E tests hit a shared, stateful KalamDB server and are not safe to run in parallel.
# Serializing kalam-cli tests avoids timeouts, flaky websocket sessions, and shared state races.
retries = 3
# Limit test execution to prevent too many concurrent tests hitting the shared server
test-threads = 8

[[profile.default.overrides]]
filter = 'package(kalam-cli)'
# Force complete serialization by marking all tests as needing the single shared resource
threads-required = 8
retries = 3

[[profile.default.overrides]]
filter = 'package(kalam-link)'
threads-required = 8
retries = 3

[[profile.default.overrides]]
filter = 'test(test_scenario_08_subscription_reconnect)'
slow-timeout = { period = "60s", terminate-after = 2 }

# [[profile.default.overrides]]
# filter = 'package(kalamdb-server)'
# test-threads = 1
