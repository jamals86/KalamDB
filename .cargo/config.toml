# Hint bindgen towards Command Line Tools libclang on macOS hosts
[target.aarch64-apple-darwin]
rustflags = [
    "-C", "link-arg=-Wl,-rpath,/Library/Developer/CommandLineTools/usr/lib",
]

[target.aarch64-apple-darwin.env]
LIBCLANG_PATH = "/Library/Developer/CommandLineTools/usr/lib"
DYLD_FALLBACK_LIBRARY_PATH = "/Library/Developer/CommandLineTools/usr/lib"
DYLD_LIBRARY_PATH = "/Library/Developer/CommandLineTools/usr/lib"

[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-Wl,-rpath,/Library/Developer/CommandLineTools/usr/lib"]

[target.x86_64-apple-darwin.env]
LIBCLANG_PATH = "/Library/Developer/CommandLineTools/usr/lib"
DYLD_FALLBACK_LIBRARY_PATH = "/Library/Developer/CommandLineTools/usr/lib"
DYLD_LIBRARY_PATH = "/Library/Developer/CommandLineTools/usr/lib"

# --- WASM target - no special flags (avoid macOS linker flags) ---
[target.wasm32-unknown-unknown]
rustflags = []

# --- Windows (MSVC) ---
[target.x86_64-pc-windows-msvc]
# Usually no special flags are needed, but you can add linker hints if needed
rustflags = []

[build]
incremental = true
# Parallel compilation will use default (all available cores)

# Use sparse registry protocol for faster dependency resolution
[registries.crates-io]
protocol = "sparse"