// This file is automatically generated, so please do not edit it.
// @generated by `flutter_rust_bridge`@ 2.11.1.

// ignore_for_file: invalid_use_of_internal_member, unused_import, unnecessary_import

import 'frb_generated.dart';
import 'models.dart';
import 'package:flutter_rust_bridge/flutter_rust_bridge_for_generated.dart';

// These functions are ignored because they are not marked as `pub`: `build_event_handlers`, `create_client_inner`

/// Create a new KalamDB client.
///
/// * `base_url` — server URL, e.g. `"https://db.example.com"` or `"http://localhost:3000"`.
/// * `auth` — authentication method (basic, JWT, or none).
/// * `timeout_ms` — optional HTTP request timeout in milliseconds (default 30 000).
/// * `max_retries` — optional retry count for idempotent queries (default 3).
/// * `enable_connection_events` — when `true`, connection lifecycle events
///   (connect, disconnect, error, receive, send) are queued internally and
///   can be retrieved via [`dart_next_connection_event`].
DartKalamClient dartCreateClient(
        {required String baseUrl,
        required DartAuthProvider auth,
        PlatformInt64? timeoutMs,
        int? maxRetries,
        bool? enableConnectionEvents}) =>
    RustLib.instance.api.crateApiDartCreateClient(
        baseUrl: baseUrl,
        auth: auth,
        timeoutMs: timeoutMs,
        maxRetries: maxRetries,
        enableConnectionEvents: enableConnectionEvents);

/// Execute a SQL query, optionally with parameters and namespace.
///
/// * `params_json` — JSON-encoded array of parameter values, e.g. `'["val1", 42]'`.
///   Pass `null` for no parameters.
/// * `namespace` — optional namespace context for unqualified table names.
Future<DartQueryResponse> dartExecuteQuery(
        {required DartKalamClient client,
        required String sql,
        String? paramsJson,
        String? namespace}) =>
    RustLib.instance.api.crateApiDartExecuteQuery(
        client: client, sql: sql, paramsJson: paramsJson, namespace: namespace);

/// Log in with username and password. Returns tokens and user info.
Future<DartLoginResponse> dartLogin(
        {required DartKalamClient client,
        required String username,
        required String password}) =>
    RustLib.instance.api.crateApiDartLogin(
        client: client, username: username, password: password);

/// Refresh an access token using a refresh token.
Future<DartLoginResponse> dartRefreshToken(
        {required DartKalamClient client, required String refreshToken}) =>
    RustLib.instance.api
        .crateApiDartRefreshToken(client: client, refreshToken: refreshToken);

/// Check server health (version, status, etc.).
Future<DartHealthCheckResponse> dartHealthCheck(
        {required DartKalamClient client}) =>
    RustLib.instance.api.crateApiDartHealthCheck(client: client);

/// Check whether the server requires initial setup.
Future<DartSetupStatusResponse> dartCheckSetupStatus(
        {required DartKalamClient client}) =>
    RustLib.instance.api.crateApiDartCheckSetupStatus(client: client);

/// Perform initial server setup (create first admin user).
Future<DartServerSetupResponse> dartServerSetup(
        {required DartKalamClient client,
        required DartServerSetupRequest request}) =>
    RustLib.instance.api
        .crateApiDartServerSetup(client: client, request: request);

/// Pull the next connection lifecycle event.
///
/// Returns `None` when event collection is disabled or the client is dropped.
/// Dart should call this in a loop:
///
/// ```dart
/// while (true) {
///   final event = await dartNextConnectionEvent(client: client);
///   if (event == null) break;
///   // handle event ...
/// }
/// ```
Future<DartConnectionEvent?> dartNextConnectionEvent(
        {required DartKalamClient client}) =>
    RustLib.instance.api.crateApiDartNextConnectionEvent(client: client);

/// Check whether connection event collection is enabled for this client.
bool dartConnectionEventsEnabled({required DartKalamClient client}) =>
    RustLib.instance.api.crateApiDartConnectionEventsEnabled(client: client);

/// Create a live-query subscription.
///
/// * `sql` — the SELECT query to subscribe to.
/// * `config` — optional advanced configuration (batch size, etc.).
///
/// Returns an opaque [`DartSubscription`] handle.  Use
/// [`dart_subscription_next`] to pull events and
/// [`dart_subscription_close`] to tear down.
Future<DartSubscription> dartSubscribe(
        {required DartKalamClient client,
        required String sql,
        DartSubscriptionConfig? config}) =>
    RustLib.instance.api
        .crateApiDartSubscribe(client: client, sql: sql, config: config);

/// Pull the next change event from a subscription.
///
/// Returns `None` when the subscription has ended (server closed or
/// [`dart_subscription_close`] was called).
Future<DartChangeEvent?> dartSubscriptionNext(
        {required DartSubscription subscription}) =>
    RustLib.instance.api
        .crateApiDartSubscriptionNext(subscription: subscription);

/// Close a subscription and release server-side resources.
Future<void> dartSubscriptionClose({required DartSubscription subscription}) =>
    RustLib.instance.api
        .crateApiDartSubscriptionClose(subscription: subscription);

/// Get the server-assigned subscription ID.
String dartSubscriptionId({required DartSubscription subscription}) =>
    RustLib.instance.api.crateApiDartSubscriptionId(subscription: subscription);

// Rust type: RustOpaqueMoi<flutter_rust_bridge::for_generated::RustAutoOpaqueInner<DartKalamClient>>
abstract class DartKalamClient implements RustOpaqueInterface {}

// Rust type: RustOpaqueMoi<flutter_rust_bridge::for_generated::RustAutoOpaqueInner<DartSubscription>>
abstract class DartSubscription implements RustOpaqueInterface {}
