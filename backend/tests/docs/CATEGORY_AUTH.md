# Auth Tests (backend/tests/misc/auth)

## Standard Steps
1. Arrange authentication config and users as required.
2. Execute the auth flow described by the test name.
3. Assert the response status, errors, and side effects.

## Tests
- benchmark_basic_auth_performance — [backend/tests/misc/auth/test_auth_performance.rs](backend/tests/misc/auth/test_auth_performance.rs#L28)
- benchmark_jwt_auth_performance — [backend/tests/misc/auth/test_auth_performance.rs](backend/tests/misc/auth/test_auth_performance.rs#L97)
- test_auth_cache_effectiveness — [backend/tests/misc/auth/test_auth_performance.rs](backend/tests/misc/auth/test_auth_performance.rs#L182)
- test_concurrent_auth_load — [backend/tests/misc/auth/test_auth_performance.rs](backend/tests/misc/auth/test_auth_performance.rs#L274)
- test_as_user_blocked_for_regular_user — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L50)
- test_as_user_with_service_role — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L90)
- test_as_user_with_dba_role — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L136)
- test_insert_as_user_ownership — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L181)
- test_update_as_user — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L224)
- test_delete_as_user — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L268)
- test_as_user_on_shared_table_rejected — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L308)
- test_as_user_nonexistent_user — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L362)
- test_as_user_performance — [backend/tests/misc/auth/test_as_user_impersonation.rs](backend/tests/misc/auth/test_as_user_impersonation.rs#L390)
- test_basic_auth_success — [backend/tests/misc/auth/test_basic_auth.rs](backend/tests/misc/auth/test_basic_auth.rs#L18)
- test_basic_auth_invalid_credentials — [backend/tests/misc/auth/test_basic_auth.rs](backend/tests/misc/auth/test_basic_auth.rs#L64)
- test_basic_auth_missing_header — [backend/tests/misc/auth/test_basic_auth.rs](backend/tests/misc/auth/test_basic_auth.rs#L101)
- test_basic_auth_malformed_header — [backend/tests/misc/auth/test_basic_auth.rs](backend/tests/misc/auth/test_basic_auth.rs#L124)
- test_basic_auth_nonexistent_user — [backend/tests/misc/auth/test_basic_auth.rs](backend/tests/misc/auth/test_basic_auth.rs#L160)
- test_init_creates_system_user — [backend/tests/misc/auth/test_cli_auth.rs](backend/tests/misc/auth/test_cli_auth.rs#L16)
- test_system_user_password_is_hashed — [backend/tests/misc/auth/test_cli_auth.rs](backend/tests/misc/auth/test_cli_auth.rs#L52)
- test_system_user_has_metadata — [backend/tests/misc/auth/test_cli_auth.rs](backend/tests/misc/auth/test_cli_auth.rs#L83)
- test_e2e_auth_flow — [backend/tests/misc/auth/test_e2e_auth_flow.rs](backend/tests/misc/auth/test_e2e_auth_flow.rs#L21)
- test_role_based_auth_e2e — [backend/tests/misc/auth/test_e2e_auth_flow.rs](backend/tests/misc/auth/test_e2e_auth_flow.rs#L140)
- test_password_security_e2e — [backend/tests/misc/auth/test_e2e_auth_flow.rs](backend/tests/misc/auth/test_e2e_auth_flow.rs#L244)
- test_jwt_auth_success — [backend/tests/misc/auth/test_jwt_auth.rs](backend/tests/misc/auth/test_jwt_auth.rs#L73)
- test_jwt_auth_expired_token — [backend/tests/misc/auth/test_jwt_auth.rs](backend/tests/misc/auth/test_jwt_auth.rs#L132)
- test_jwt_auth_invalid_signature — [backend/tests/misc/auth/test_jwt_auth.rs](backend/tests/misc/auth/test_jwt_auth.rs#L181)
- test_jwt_auth_untrusted_issuer — [backend/tests/misc/auth/test_jwt_auth.rs](backend/tests/misc/auth/test_jwt_auth.rs#L230)
- test_jwt_auth_missing_sub_claim — [backend/tests/misc/auth/test_jwt_auth.rs](backend/tests/misc/auth/test_jwt_auth.rs#L279)
- test_jwt_auth_malformed_header — [backend/tests/misc/auth/test_jwt_auth.rs](backend/tests/misc/auth/test_jwt_auth.rs#L344)
- test_authentication_returns_user — [backend/tests/misc/auth/test_last_seen.rs](backend/tests/misc/auth/test_last_seen.rs#L22)
- test_multiple_authentications_succeed — [backend/tests/misc/auth/test_last_seen.rs](backend/tests/misc/auth/test_last_seen.rs#L45)
- test_live_query_auth_expiry — [backend/tests/misc/auth/test_live_queries_auth_expiry.rs](backend/tests/misc/auth/test_live_queries_auth_expiry.rs#L10)
- test_oauth_google_success — [backend/tests/misc/auth/test_oauth.rs](backend/tests/misc/auth/test_oauth.rs#L23)
- test_oauth_user_password_rejected — [backend/tests/misc/auth/test_oauth.rs](backend/tests/misc/auth/test_oauth.rs#L65)
- test_oauth_subject_matching — [backend/tests/misc/auth/test_oauth.rs](backend/tests/misc/auth/test_oauth.rs#L112)
- test_oauth_auto_provision_disabled_by_default — [backend/tests/misc/auth/test_oauth.rs](backend/tests/misc/auth/test_oauth.rs#L157)
- test_oauth_user_missing_fields — [backend/tests/misc/auth/test_oauth.rs](backend/tests/misc/auth/test_oauth.rs#L173)
- test_oauth_azure_provider — [backend/tests/misc/auth/test_oauth.rs](backend/tests/misc/auth/test_oauth.rs#L208)
- test_complexity_uppercase_required — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L81)
- test_complexity_lowercase_required — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L102)
- test_complexity_digit_required — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L123)
- test_complexity_special_required — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L144)
- test_complexity_valid_password_succeeds — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L165)
- test_complexity_disabled_allows_simple_password — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L186)
- test_complexity_alter_user_requires_special_character — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L211)
- test_complexity_alter_user_valid_password_succeeds — [backend/tests/misc/auth/test_password_complexity.rs](backend/tests/misc/auth/test_password_complexity.rs#L243)
- test_password_never_plaintext — [backend/tests/misc/auth/test_password_security.rs](backend/tests/misc/auth/test_password_security.rs#L15)
- test_concurrent_bcrypt_non_blocking — [backend/tests/misc/auth/test_password_security.rs](backend/tests/misc/auth/test_password_security.rs#L39)
- test_weak_password_rejected — [backend/tests/misc/auth/test_password_security.rs](backend/tests/misc/auth/test_password_security.rs#L79)
- test_min_password_length_8 — [backend/tests/misc/auth/test_password_security.rs](backend/tests/misc/auth/test_password_security.rs#L98)
- test_max_password_length_72 — [backend/tests/misc/auth/test_password_security.rs](backend/tests/misc/auth/test_password_security.rs#L120)
- test_password_not_in_error_messages — [backend/tests/misc/auth/test_password_security.rs](backend/tests/misc/auth/test_password_security.rs#L137)
- test_password_never_logged — [backend/tests/misc/auth/test_password_security.rs](backend/tests/misc/auth/test_password_security.rs#L151)
- test_user_role_own_tables_access_and_isolation — [backend/tests/misc/auth/test_rbac.rs](backend/tests/misc/auth/test_rbac.rs#L14)
- test_service_role_cross_user_access — [backend/tests/misc/auth/test_rbac.rs](backend/tests/misc/auth/test_rbac.rs#L55)
- test_service_role_flush_operations — [backend/tests/misc/auth/test_rbac.rs](backend/tests/misc/auth/test_rbac.rs#L92)
- test_service_role_cannot_manage_users — [backend/tests/misc/auth/test_rbac.rs](backend/tests/misc/auth/test_rbac.rs#L126)
- test_user_cannot_manage_users — [backend/tests/misc/auth/test_rbac.rs](backend/tests/misc/auth/test_rbac.rs#L136)
- test_dba_can_manage_users — [backend/tests/misc/auth/test_rbac.rs](backend/tests/misc/auth/test_rbac.rs#L150)
- test_system_role_all_access_smoke — [backend/tests/misc/auth/test_rbac.rs](backend/tests/misc/auth/test_rbac.rs#L163)
- test_soft_delete_hides_rows — [backend/tests/misc/auth/test_soft_delete.rs](backend/tests/misc/auth/test_soft_delete.rs#L13)
- test_soft_delete_preserves_data — [backend/tests/misc/auth/test_soft_delete.rs](backend/tests/misc/auth/test_soft_delete.rs#L91)
- test_deleted_field_default_false — [backend/tests/misc/auth/test_soft_delete.rs](backend/tests/misc/auth/test_soft_delete.rs#L145)
- test_multiple_deletes — [backend/tests/misc/auth/test_soft_delete.rs](backend/tests/misc/auth/test_soft_delete.rs#L191)
- test_delete_with_where_clause — [backend/tests/misc/auth/test_soft_delete.rs](backend/tests/misc/auth/test_soft_delete.rs#L248)
- test_count_excludes_deleted_rows — [backend/tests/misc/auth/test_soft_delete.rs](backend/tests/misc/auth/test_soft_delete.rs#L313)
